function navAppShell(){var e=document.getElementsByClassName("page-nav-li"),a=document.getElementsByClassName("page-nav"),t=0;for(i=0;i<e.length;i++)t+=e[i].offsetWidth;a[0].style.width=t+"px"}function updateLanguageLabel(){document.getElementById("lang-name-label").innerHTML=_Language.getNameFromCode(_User.lang)}function showMainMenu(){var e=document.getElementById("pwa-header");e.className.match(".pwa-header-active")&&(e.className="header",showHide("main-search",0)),showHide("main-nav",1),slideMenu("loc-layout",1),slideMenu("category-layout",0),slideMenu("areas-layout",0),updateLanguageLabel()}function showMainSearch(){var e=document.getElementById("pwa-header");e.className.match(".pwa-header-active")?(e.className="header",showHide("main-search",0)):(e.className+=" pwa-header-active",showHide("main-search",1),showHide("saved-results",1),document.getElementById("search").value="",showHide("search-results",0)),helper.empty("recently-searched");var a=document.getElementById("recently-searched");for(var t in _User.locations)a.innerHTML+='<li class="results"><a onclick="javascript:searchResultsClicked(this, '+t+", '"+_User.locations[t].prsntNm+'\', false, false )" class="dropdown-name">'+_User.locations[t].prsntNm+"</a></li>"}function searchResults(){var e=document.getElementById("search").value;if(""===e||e.length<=3)showHide("saved-results",1),showHide("search-results",0);else{showHide("saved-results",0),showHide("search-results",1);lookupLocations(e);if(void 0!==_Locations.results){for(var a="",t=0;t<_Locations.results.length;t++){var n=_Locations.results[t].cityNm+", "+_Locations.results[t].stCd;a+='<li class="results"><a class="name" onclick="searchResultsClicked(this, '+t+", '"+n+"', true, true)\"> "+n+"  </a></li>"}document.getElementById("search-results-list").innerHTML=a}}}function searchResultsClicked(e,a,t,n,s){var o=s?_Locations.results[a]:_User.locations[a];if(t&&(o.prsntNm=t),!o.lat&&o.geocode){var c=o.geocode.split(",");console.log(c),o.lat=c[0],o["long"]=c[1]}var r=document.getElementById("pwa-header");r.className.match(".pwa-header-active")&&(r.className="header",showHide("main-search",0)),document.getElementById("activeLocName").innerHTML=e.innerHTML,_User.newActiveLocation(o,n),hideMainSearch()}function clearSearch(){showHide("saved-results",1),document.getElementById("search").value="",showHide("search-results",0)}function hideMainMenu(){showHide("main-nav",0)}function hideMainSearch(){var e=document.getElementById("pwa-header");e.className.match(".pwa-header-active")&&(e.className="header",showHide("main-search",0))}function showTemperature(e){if(!e.className.match("active")){var a=document.getElementsByClassName("temp-red");for(i=0;i<a.length;i++)a[i].className="temp-red";e.className+=" active","°C"===e.innerHTML?(_User.setUnitPreference("m"),_Metrics.clickTrack(e,_Router.page,"menu","celsius")):(_User.setUnitPreference("e"),_Metrics.clickTrack(e,_Router.page,"menu","fahrenheit"))}}function setActiveTemperatureUnits(){for(var e=document.getElementsByClassName("temp-red"),a={m:"°C",e:"°F"},t=_User.unitPref||"e",n=0;n<e.length;n++)e[n].className="temp-red",e[n].innerHTML===a[t]&&(e[n].className+=" active")}function pwaNavClicked(e){var a=window.innerWidth,t=e.clientX,n=document.getElementsByClassName("menubar")[0].clientWidth,s=.3*a,o=.7*a;t<s?document.getElementsByClassName("nav-suite")[0].scrollLeft="0":t>o&&(document.getElementsByClassName("nav-suite")[0].scrollLeft=n-a)}function changeNav(e){if(console.log("called."),document.getElementById("main-search").style.display="none",!e.className.match("active")){var a=document.getElementsByClassName("page-nav-li");for(i=0;i<a.length;i++)a[i].className="page-nav-li";e.className+=" active"}_Router.changePage(e.textContent)}function showLocations(){slideMenu("loc-layout",1),slideMenu("category-layout",0),slideMenu("areas-layout",0)}function showCategories(){var e="";for(c=0;c<categories.length;c++){var a=categories[c].catName;e+="<li ><a href=\"javascript:showAreas('"+a+"',"+c+')"><span >'+categories[c].catName+'</span> <span class="wx-iconfont-global wx-icon-arrow-right wx-icon-small"></span></a></li>'}document.getElementById("lang-categories").innerHTML=e,slideMenu("loc-layout",0),slideMenu("category-layout",1),slideMenu("areas-layout",0)}function showAreas(e,a){var t="";for(l=0;l<categories[a].countryName.length;l++)t+="<li><a href=\"javascript:changeLang('"+categories[a].countryName[l].code+"')\"><span> "+categories[a].countryName[l].name+" </span> <span> | "+categories[a].countryName[l].language+"</span> </a></li>";document.getElementById("country-languages").innerHTML=t,document.getElementById("area-value").innerHTML=e,slideMenu("loc-layout",0),slideMenu("category-layout",0),slideMenu("areas-layout",1)}function changeLang(e){_User.setLanguage(e),_Language.updateTranslations().then(function(){_Router.updateURL(),_Router.setRTL()}),showHide("main-nav",0)}function showHide(e,a){0===a?document.getElementById(e).style.display="none":document.getElementById(e).style.display="block"}function slideMenu(e,a){0===a?helper.addClass(document.getElementById(e),"slide-out"):helper.removeClass(document.getElementById(e),"slide-out")}function lookupLocations(e){e&&e.length&&e.length>3&&_Locations.searchLocs(e)}function getGeolocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(showPosition)}function showRecentlySearched(){downArrayClicked===!1?(showHide("drop-down-array-list",1),downArrayClicked=!0):(showHide("drop-down-array-list",0),downArrayClicked=!1)}function capitalizeEachWord(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}var downArrayClicked=!1;window.onload=navAppShell(),window.resize=navAppShell();var recentLocsMap=[["dropdown-name","prsntNm"]];document.getElementById("event-anchor").addEventListener("builder",function(){var e=[["activeLocTemp",_Data.obs.temperature],["activeLocName",_User.activeLocation.prsntNm]];helper.setContent(e)});var langMap,assignAppShellLang=function(){langMap=[["nav-today",_Lang.today.toUpperCase()],["nav-hourly",_Lang.hourly.toUpperCase()],["nav-fiveday",_Lang["5 day"].toUpperCase()],["nav-tenday",_Lang["10 day"].toUpperCase()],["nav-weekend",_Lang.weekend.toUpperCase()],["nav-map",_Lang.maps.toUpperCase()],["update-current-location",capitalizeEachWord(_Lang["update current location"])],["update-current-location-recent",capitalizeEachWord(_Lang["update current location"])],["recent-searches-text",_Lang["recent searches"].toUpperCase()],["footer-terms-of-use",capitalizeEachWord(_Lang["terms of use"])],["footer-privacy-policy",capitalizeEachWord(_Lang["privacy policy"])],["footer-feedback",capitalizeEachWord(_Lang.feedback)],["footer-press",capitalizeEachWord(_Lang.press)]],helper.setContent(langMap)};domReady(function(){document.getElementById("event-anchor").addEventListener("lang-builder",function(){assignAppShellLang()}),setActiveTemperatureUnits()});