window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],function(e){function t(){l(),googletag.cmd.push(function(){googletag.destroySlots(),window.ls_dfp_slots=[],i(),a(),Promise.all([e.Promises.wfxtgPromise.promise,e.Promises.amznSlotsPromise.promise,e.Promises.criteoPromise.promise,e.Promises.weatherDataPromise.promise,e.Promises.jsonReady.promise]).then(function(){n(!0)})})}function a(){var e=v?'[id^="MW_"]':'[id^="WX_"]',t=document.querySelectorAll(e);t.forEach(function(e){r(e)})}function r(t){var a=e.adsMetricsMaps.adpositions,r=t.getAttribute("id"),n=v&&"mobile"||"desktop";googletag.cmd.push(function(){var e=googletag.defineSlot(h,a[n][r].sizes,r).addService(googletag.pubads()).setTargeting("pos",a[n][r].pos);window.ls_dfp_slots.push(e)})}function n(t){var a=v?'[id^="MW_"]':'[id^="WX_"]',r=document.querySelectorAll(a);for(var n in e.custParams)e.custParams.hasOwnProperty(n)&&googletag.pubads().setTargeting(n,e.custParams[n]);if(t&&(googletag.pubads().enableSingleRequest(),googletag.enableServices()),"undefined"!=typeof index_headertag_lightspeed){var o=function(e,t){return function(){for(index_headertag_lightspeed.set_slot_targeting(t),f=0;f<e.length;f++)document.getElementById(e[f].getAttribute("id"))&&googletag.display(e[f].getAttribute("id"));document.getElementById("windowshade_info").innerHTML="Pubads Call Time : "+((new Date).getTime()-window.renderStartTime)/1e3+" secs",console.dir("Pubads Call Time : "+((new Date).getTime()-window.renderStartTime)/1e3+"secs")}}(r,window.ls_dfp_slots);index_headertag_lightspeed.add_session_end_hook(o,!0),index_headertag_lightspeed.refresh()}else r.forEach(function(e){s(e)}),document.getElementById("windowshade_info").innerHTML="Pubads Call Time : "+((new Date).getTime()-window.renderStartTime)/1e3+" secs",console.dir("Pubads Call Time : "+((new Date).getTime()-window.renderStartTime)/1e3+"secs")}function s(e){var t=e.getAttribute("id");googletag.display(t)}function o(){var e=v&&"7646-weatherMW"||"7646-weatherBW",t="//ox-d.weatherus.servedbyopenx.com/w/1.0/jstag?nc="+e,a=document.createElement("script"),r=document.getElementsByTagName("script")&&document.getElementsByTagName("script")[0];a.src=t,a.async=!0,r.parentNode.insertBefore(a,r)}function c(){e.Promises.jsonReady.promise.then(function(){var t=e.adsMetricsMaps,a=(window.localStorage.jStorage?JSON.parse(window.localStorage.jStorage):{},location.href.match(/[a-z]{2}-[A-Z]{2}/));a=a&&a[0]||"en-US",p=_&&t.localeToAdUnitMap[a].desktop||y&&t.localeToAdUnitMap[a].tablet||t.localeToAdUnitMap[a].mobile,p=S?"test_"+p:p,i(),w=t.localeToAdUnitMap[a].metrics?t.localeToAdUnitMap[a].metrics:"twcigls"})}function i(){var t=window.localStorage.jStorage?JSON.parse(window.localStorage.jStorage):{},a=t.user&&t.user.locale?t.user.locale.replace("_","-"):"en-US",r=location.pathname.match(/\/(weather\/.*?)\//),n="/"+e.adsMetricsMaps.localeToAdUnitMap[a].network+"/";r=r&&r.length>1&&r[1],g=e.adsMetricsMaps.urlToAdZone[r]&&e.adsMetricsMaps.urlToAdZone[r].adZone||"/local_forecasts/today",h=n+p+g,P=n+p}function l(){e.custParams=e.custParams||{},e.Promises.jsonReady.promise.then(function(){var t=location.pathname.match(/\/(weather\/.*?)\//);t=t&&t.length>1&&t[1];var a=window.innerWidth;e.custParams.ad_unit=encodeURIComponent(P),e.custParams.browser=m(),e.custParams.cat="fcst",e.custParams.ch="fcst",e.custParams.fam="fcst",e.custParams.par=e.utils.getParameterByName("par"),e.custParams.vw=e.utils.getCookie("fv"),e.custParams.tf=e.adsMetricsMaps.urlToAdZone[t]&&e.adsMetricsMaps.urlToAdZone[t].timeframe,e.custParams.plat=a<768&&"wx_mw"||a>=768&&a<1025&&"wx_tab"||a>1024&&"wx"}),S&&(e.custParams.adstest=S)}function m(){var e=navigator&&navigator.userAgent,t=e&&e.match(/chrome|firefox|safari|trident/i),a="unknown";if(t&&"object"==typeof t&&t.length&&t.length>0)switch(t[0].toLowerCase()){case"chrome":a="twcchrome";break;case"firefox":a="twcff";break;case"safari":a="twcsafari";break;case"trident":a="twcie";break;default:a="twcnative"}return a}function u(){var t=e.utils.getCookie("fv"),a=new Date((new Date).getTime()+18e5);document.domain;t=t?1==t||2==t?++t:-1:1,a=a.toUTCString(),document.cookie="fv="+t+"; expires="+a+";path=/"}function d(){function t(e,t){return"e"===t?Math.round(5*(e-32)/9):Math.round(9*e/5+32)}function a(e){return[31,33].indexOf(e)!=-1?"clr":[26,27,28,29,30].indexOf(e)!=-1?"cld":[1,2,5,6,9,11,12,39,40,45].indexOf(e)!=-1?"rain":[13,14,15,16,41,42,43,46].indexOf(e)!=-1?"snow":[7,8,10,18].indexOf(e)!=-1?"ice":[32,34,36].indexOf(e)!=-1?"sun":[0,3,4,17,35,37,38,47].indexOf(e)!=-1?"thdr":void 0}function r(e,t){if("undefined"==typeof t)return"fnnl";if("f"===t)return"undefined"==typeof e?"fnnl":e<20?"fnnl":e>=20&&e<=24?"20l":e>=25&&e<=29?"20h":e>=30&&e<=34?"30l":e>=35&&e<=39?"30h":e>=40&&e<=44?"40l":e>=45&&e<=49?"40h":e>=50&&e<=54?"50l":e>=55&&e<=59?"50h":e>=60&&e<=64?"60l":e>=65&&e<=69?"60h":e>=70&&e<=74?"70l":e>=75&&e<=79?"70h":e>=80&&e<=84?"80l":e>=85&&e<=89?"80h":e>=90&&e<=94?"90l":e>=95&&e<=100?"90h":e>100?"fpnl":"fnnl";if("c"===t){if("undefined"==typeof e)return"cnnl";var a="cpnl";return a=e>60?"cpnl":e%2==0&&e>=0?e+1+"ci":e%2!=0&&e>=0?e+"ci":e%2==0&&e<0&&e>-9?e*-1+"nci":"cnnl"}}function n(e){if("object"==typeof e&&2===e.length){var t=e[0],a=e[1],n=r(t,"f"),s=t>=0?t+"f":t*-1+"nf",o=a>=0?a+"c":a*-1+"nc",c="cpnl";return c=a>60?"cpnl":a%2==0&&a>=0?a+1+"ci":a%2!=0&&a>=0?a+"ci":a%2==0&&a<0&&a>-9?a*-1+"nci":"cnnl",n+","+s+","+o+","+c}return e}function s(e){var t=e.scale,a=e.val;return"c"===t&&(a=9*a/5+32),"undefined"==typeof a?"nl":a<=31?"icy":a>=32&&a<=40?"cold":a>=41&&a<=55?"thaw":a>=56&&a<=69?"cool":a>=70&&a<=79?"mod":a>=80&&a<=89?"warm":a>=90&&a<=100?"hot":a>=101?"xhot":void 0}function o(e){var t=e.val;return"undefined"==typeof t?"nl":t<=0?"icy":t>=1&&t<=4?"cold":t>=5&&t<=12?"thaw":t>=13&&t<=20?"cool":t>=21&&t<=25?"mod":t>=26&&t<=31?"warm":t>=32&&t<=38?"hot":t>=39?"xhot":void 0}function c(e){return e>=1&&e<3?"1":e>=3?"3":void 0}function i(e){return"undefined"==typeof e?"nl":e>=1&&e<3?"1":e>=3?"3":"nl"}function l(e){return e>=61?"hi":"lo"}function m(e){return e>=6&&e<=29?"lo":e>=30?"hi":void 0}function u(e){return e>=5?"hi":"nl"}function d(e){return 0==e?"stdy":1==e?"rsng":2==e?"fllng":void 0}function p(e){var t=e,a=[].concat((t.tree||[])[0]||[],(t.weed||[])[0]||[],(t.grass||[])[0]||[]);return a=a.length>0?Math.max.apply(null,a):"nl",isNaN(a)?"nl":a>=4?"hi":a<2?"lo":"me"}document.addEventListener("builder",function(){if(_Data&&_Data.obs){var f,g,h,P,w,v=_Data.obs;f=_User&&_User.unitPref||"m",g="e"===f?v.temperature:t(v.temperature,f),h="m"===f?v.temperature:t(v.temperature,f),P="e"===f?v.feelsLike:t(v.feelsLike,f),w="m"===f?v.feelsLike:t(v.feelsLike,f),e.custParams=e.custParams||{},e.custParams.hmid=l(v.humidity),e.custParams.wind=m(v.windSpeed),e.custParams.uv=u(v.uvIndex),e.custParams.tmp=n([g,h]),e.custParams.tempc=h+"",e.custParams.tempr=s({val:g+""}),e.custParams.temprc=o({val:h+""}),e.custParams.fltmpf=P+"",e.custParams.fltmpc=w+"",v.iconExt&&(e.custParams.wxExtIcon=v.iconExt+""),e.custParams.cnd=a(v.icon),e.custParams.baro=d(v.barometerCode),e.custParams.snw=c(v.snowDepth)}if(_Data&&_Data.dailyForecast){var y,_,S,M,b,T,x,D,C,A,L,E,k,U,j,I,B={},R={},W={};R.prcpStr="";var N=_Data.dailyForecast;T=N.day,x=N.night,D=T.precipPct.slice(0,3),C=x.precipPct.slice(0,3),R=D.reduce(function(e,t,a){return E=2*a+1,k=E+1,U=C[a],e[E+""]=t?t:"nl",e[k+""]=U?U:"nl",e.prcpStr+=(t<50?E+"_0,":E+"_50,")+(U<50?k+"_0,":k+"_50,"),e},R),A=T.icon.slice(0,3),L=x.icon.slice(0,3),W=A.reduce(function(e,t,r){return j=a(t),I=a(L[r]),e["fc"+(2*r+1)]=j?j:"nl",e["fc"+(2*r+2)]=I?I:"nl",e},W),T.temperature&&T.temperature.length&&(y=Math.max.apply(null,"e"===f?T.temperature.slice(0,3):T.temperature.slice(0,3).map(function(e){return t(e,f)}))||void 0),x.temperature&&x.temperature.length&&(_=Math.min.apply(null,"e"===f?x.temperature.slice(0,3):x.temperature.slice(0,3).map(function(e){return t(e,f)}))||void 0),T.temperature&&T.temperature.length&&(S=Math.max.apply(null,"m"===f?T.temperature.slice(0,3):T.temperature.slice(0,3).map(function(e){return t(e,f)}))||void 0),x.temperature&&x.temperature.length&&(M=Math.max.apply(null,"m"===f?x.temperature.slice(0,3):x.temperature.slice(0,3).map(function(e){return t(e,f)}))||void 0),T.snwQfp&&T.snwQfp.length&&x.snwQfp&&x.snwQfp.length&&(b=Math.min.apply(null,[].concat(T.snwQfp,x.snwQfp))||void 0),R.prcpStr=R.prcpStr.substr(0,R.prcpStr.length-1),B.prcp=R,B.cond=W,B.tempH=r(y,"f"),B.tempL=r(_,"f"),B.tempHR=s({val:y}),B.tempLR=s({val:_}),B.tempCH=S,B.tempCL=M,B.tempCHR=s({val:S,scale:"c"}),B.tempCLR=s({val:M,scale:"c"}),B.fsnw=i(b),B.fiveDay=T.phrase.slice(0,5).reduce(function(e,t,a){return e["d"+(a+1)]=t?t:"nl",e},{}),e.custParams.fhi=B.tempH+""||"",e.custParams.fhr=B.tempHR+""||"",e.custParams.fli=B.tempL+""||"",e.custParams.flr=B.tempLR+""||"",e.custParams.fhic=B.tempCH+""||"",e.custParams.floc=B.tempCL+""||"",e.custParams.fsnw=B.fsnw+""||"",e.custParams.prcp=B.prcp&&B.prcp.prcpStr+""||"",e.custParams.fc1=B.cond&&B.cond.fc1+""||"",e.custParams.fc2=B.cond&&B.cond.fc2+""||"",e.custParams.fc3=B.cond&&B.cond.fc3+""||"",e.custParams.d1=B.fiveDay&&B.fiveDay.d1+""||"",e.custParams.d2=B.fiveDay&&B.fiveDay.d2+""||"",e.custParams.d3=B.fiveDay&&B.fiveDay.d3+""||"",e.custParams.d4=B.fiveDay&&B.fiveDay.d4+""||"",e.custParams.d5=B.fiveDay&&B.fiveDay.d5+""||""}_Data&&_Data.vt1alerts&&(e.custParams.alerts=""),_Data&&_Data.pollenforecast&&(e.custParams.pollen=p(_Data.pollenforecast)),e.Promises.weatherDataPromise.resolve()})}var p,g,h,P,w,v=window.innerWidth<768,y=window.innerWidth>769&&window.innerWidth<1025,_=window.innerWidth>1024,S=e.utils.getCookie("adstest");u(),d(),o(),c(),document.addEventListener("load-ads",function(e){t()}),document.getElementById("event-anchor").addEventListener("builder",function(){var t=_User.activeLocation;e.custParams=e.custParams||{},e.custParams.cc=t.cntryCd,e.custParams.cnty=t.cntyNm,e.custParams.ct=t.cityNm,e.custParams.dma=""+t.dmaCd,e.custParams.env=""+Math.floor(10*Math.random()+1),4===t.locType?e.custParams.ent="zip":1===t.locType&&(e.custParams.ent="city"),e.custParams.intl=t._gprId,e.custParams.lang=_User.lang&&_User.lang.split("-")[0],e.custParams.lat=""+t.lat,e.custParams.loc=4!==t.locType?t.locId+"$"+t.locType:t.locId,e.custParams.locale=_User.lang,e.custParams.lon=""+t["long"],e.custParams.st=t.stCd,e.custParams.zip=t.zipCd}),document.getElementById("event-anchor").addEventListener("builder-alert",function(){e.custParams=e.custParams||{};var t,a,r=window._Alert&&_Alert.priority&&"pollen"===_Alert.priority.type&&_Alert.priority.severity,n=window._Alert&&_Alert.bulletins,s=[];if(e.custParams.plln=!r&&"nl"||r&&r<2&&"lo"||r&&r>=4&&"hi"||"me",n){for(t=0,a=n.length;t<a;t++)n[t].fromStr.match(/fld/i)?s.push("fld"):n[t].fromStr.match(/trop/i)?s.push("trop"):n[t].fromStr.match(/oth/i)?s.push("oth"):n[t].fromStr.match(/thdr/i)?s.push("thdr"):n[t].fromStr.match(/tor/i)?s.push("tor"):n[t].fromStr.match(/wint/i)&&s.push("wint");e.custParams.sev&&s.length>0?e.custParams.sev=e.custParams.sev+","+s.join(","):e.custParams.sev||(e.custParams.sev=s.join(","))}}),document.getElementById("event-anchor").addEventListener("builder-content",function(){e.custParams=e.custParams||{};var t=window._Content&&_Content.mode&&_Content.mode.mode&&("normal"===_Content.mode.mode&&"n"||"severe2"===_Content.mode.mode&&"y");e.custParams.sev?e.custParams.sev=t+","+e.custParams.sev:e.custParams.sev=t})}(AdsMetricsCtrl);