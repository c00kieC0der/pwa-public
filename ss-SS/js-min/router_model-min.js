var _Router={page:""};!function(){var e,a=document.createEvent("Event");a.initEvent("pager",!0,!0);var t=function(a){helper.getJSON("/ss-SS/js-src/hreflangs/hreflang_"+e[a].href+"_page.json").then(function(t){e[a].hreflang=t,"maps"===a&&r()})};helper.getJSON("/ss-SS/js-src/page-config.json").then(function(a){e=a;for(var n in e)t(n)});var n=[],o=[],r=function(){var e={lang:"en-US",page:"weather/today/l/",loc:""};if(o=helper.parseQueryString(),o.page){var a=o.page.split("/");e.lang=2===a[1].indexOf("-")?a[1]:"en-US",e.page=o.page.substr(1,o.page.length-1)+"/l/",e.loc=o.locid?o.locid:""}else{var t="/"!==window.location.pathname?window.location.pathname:"/weather/today/l";n=t.split("/"),n.shift(),2===n[0].indexOf("-")&&(e.lang=n[0],n.length<2&&n.shift()),e.page="";for(var r in n){if("l"===n[r]){e.page+="l/";break}e.page+=n[r]+"/"}var l=n.length>1?n[n.length-1]:"";(l.indexOf(",")>-1||l.indexOf(":")>-1||5===l.length&&helper.isNumeric(Number(l)))&&(e.loc=l)}c(e)},c=function(e){_User.lang=e.lang,_Language.updateTranslations().then(function(){l(e)})};_Router.setRTL=function(){_Language.isLTRLanguage(_User.lang)?document.getElementsByTagName("html")[0].setAttribute("dir","rtl"):document.getElementsByTagName("html")[0].setAttribute("dir","ltr")};var l=function(e){_Router.setRTL(),e.loc?_Locations.supplementLoc(e.loc).then(function(a){_User.activeLocation=a,_Data.collectNew(),_Alert.getAlertData(),s(e)}):_User.activeLocation.lat?(_Data.collectNew(),s(e)):_Locations.getDefaultLocation().then(function(a){_User.activeLocation=a,_Data.collectNew(),_Alert.getAlertData(),s(e)}),helper.loadTemplate("alert-bar","modules","alert-bar")},s=function(a){if(history.state&&history.state.changeTo)_Router.changePage(history.state.changeTo);else if(a.page&&a.page!==_User.lang+"//"){"404/"===a.page&&i();for(var t in e)if("404"!==t&&a.page===e[t].hreflang[a.lang])return void _Router.changePage(t);i()}else _Router.changePage("today")},g=document.getElementsByClassName("page-nav-li"),i=function(){for(var a=0;a<g.length;a++)g[a].className=g[a].className.replace("active","");_Router.page||(_Router.page="today"),_Metrics.pageLoad(e[_Router.page].metricName,e[404].metricName,e[404].pos),_Router.page="404",helper.loadTemplateWithClass("page-content","pages","404")};_Router.changePage=function(t){for(var n=0;n<g.length;n++)g[n].className=g[n].className.replace("active","");document.getElementsByClassName("page-nav-li "+t)[0].className+=" active",_Router.page||(_Router.page="today"),_Metrics.pageLoad(e[_Router.page].metricName,e[t].metricName,e[t].pos),_Router.page=t,helper.loadTemplateWithClass("page-content","pages",t);var o=_User.activeLocation,r=o.locId?o.locId+":"+o.locType+":"+o.cntryCd:"";history.pushState({changeTo:t},t,"/"+e[t].hreflang[_User.lang]+r),p(t),helper.setCanonical(),console.log("HERE"),document.getElementById("event-anchor").dispatchEvent(a)};var p=function(e){document.getElementsByTagName("html")[0].setAttribute("lang",_User.lang);var a=_Locales.metadata[e];document.title=a.page_title.replaceAll("{dynamicLocName}",_User.activeLocation.prsntNm);var t=document.getElementsByTagName("META");for(tag in t)"Description"===t[tag].name&&(t[tag].content=a.page_desc.replaceAll("{dynamicLocName}",_User.activeLocation.prsntNm),t[tag].content=a.page_desc.replaceAll("{pageLocName}",_User.activeLocation.prsntNm)),"Keywords"===t[tag].name&&(t[tag].content=a.page_keywords.replaceAll("{dynamicLocName}",_User.activeLocation.prsntNm),t[tag].content=a.page_keywords.replaceAll("{pageLocName}",_User.activeLocation.prsntNm))};_Router.updateURL=function(){var a=_User.activeLocation,t=a.locId?a.locId+":"+a.locType+":"+a.cntryCd:"";_Router.page||(_Router.page="today");var n={lang:_User.lang,page:e[_Router.page].hreflang[_User.lang],loc:t};s(n)},_Router.dispatchAds=function(){window.AdsMetricsCtrl&&AdsMetricsCtrl.Promises&&AdsMetricsCtrl.Promises.loadAds&&document.dispatchEvent(AdsMetricsCtrl.Promises.loadAds)}}();