var savedPco=window.localStorage.jStorage?JSON.parse(window.localStorage.jStorage):{},locale=savedPco.user&&savedPco.user.locale?savedPco.user.locale:"en_US",language=savedPco.user&&savedPco.user.locale?savedPco.user.locale.replace("_","-"):"en-US";!function(e){function convertTemp(e,t){return"e"===t?Math.round(5*(e-32)/9):Math.round(9*e/5+32)}function getCond(e){return[31,33].indexOf(e)!=-1?"clr":[26,27,28,29,30].indexOf(e)!=-1?"cld":[1,2,5,6,9,11,12,39,40,45].indexOf(e)!=-1?"rain":[13,14,15,16,41,42,43,46].indexOf(e)!=-1?"snow":[7,8,10,18].indexOf(e)!=-1?"ice":[32,34,36].indexOf(e)!=-1?"sun":[0,3,4,17,35,37,38,47].indexOf(e)!=-1?"thdr":void 0}function getTempInc(e,t){if("undefined"==typeof t)return"fnnl";if("f"===t)return"undefined"==typeof e?"fnnl":e<20?"fnnl":e>=20&&e<=24?"20l":e>=25&&e<=29?"20h":e>=30&&e<=34?"30l":e>=35&&e<=39?"30h":e>=40&&e<=44?"40l":e>=45&&e<=49?"40h":e>=50&&e<=54?"50l":e>=55&&e<=59?"50h":e>=60&&e<=64?"60l":e>=65&&e<=69?"60h":e>=70&&e<=74?"70l":e>=75&&e<=79?"70h":e>=80&&e<=84?"80l":e>=85&&e<=89?"80h":e>=90&&e<=94?"90l":e>=95&&e<=100?"90h":e>100?"fpnl":"fnnl";if("c"===t){if("undefined"==typeof e)return"cnnl";var a="cpnl";return a=e>60?"cpnl":e%2==0&&e>=0?e+1+"ci":e%2!=0&&e>=0?e+"ci":e%2==0&&e<0&&e>-9?e*-1+"nci":"cnnl"}}function tempR(e){var t=e.scale,a=e.val;return"c"===t&&(a=9*a/5+32),"undefined"==typeof a?"nl":a<=31?"icy":a>=32&&a<=40?"cold":a>=41&&a<=55?"thaw":a>=56&&a<=69?"cool":a>=70&&a<=79?"mod":a>=80&&a<=89?"warm":a>=90&&a<=100?"hot":a>=101?"xhot":void 0}function snowR(e){return"undefined"==typeof e?"nl":e>=1&&e<3?"1":e>=3?"3":"nl"}function hum(e){return e>=61?"hi":"lo"}function wind(e){return e>=6&&e<=29?"lo":e>=30?"hi":void 0}function uv(e){if(e>=5)return"hi"}function getPollen(e){var t=e,a=[].concat((t.tree||[])[0]||[],(t.weed||[])[0]||[],(t.grass||[])[0]||[]);return a=a.length>0?Math.max.apply(null,a):"nl",isNaN(a)?"nl":a>=4?"hi":a<2?"lo":"me"}document.getElementById("event-anchor").addEventListener("worker-builder",function(t){if(console.log("cust_params fired...",(new Date).getTime()-window.renderStartTime,t),console.log("Data",_Data),_Data&&_Data.obs){var a,n,r,s,o,i=_Data.obs;a=_User&&_User.unitPref||"m",n="e"===a?i.temperature:convertTemp(i.temperature,a),r="m"===a?i.temperature:convertTemp(i.temperature,a),s="e"===a?i.feelsLike:convertTemp(i.feelsLike,a),o="m"===a?i.feelsLike:convertTemp(i.feelsLike,a),e.custParams=e.custParams||{},e.custParams.hmid=hum(i.humidity),e.custParams.wind=wind(i.windSpeed),e.custParams.uv=uv(i.uvIndex),e.custParams.realTemp=n+"",e.custParams.tmp=[n,r],e.custParams.tempc=r+"",e.custParams.tempR={val:n+""},e.custParams.tempRC={val:r+""},e.custParams.wxIcon=i.icon+"",e.custParams.flsLkF=s+"",e.custParams.flsLkC=o+"",i.iconExt&&(e.custParams.wxExtIcon=i.iconExt+""),e.custParams.cnd=i.icon+"",e.custParams.baro=i.barometerCode+"",e.custParams.snw=i.snowDepth+""}if(_Data&&_Data.dailyForecast){var c,l,d,u,m,p,f,g,w,h,v,P,_,y,T,x,D={},S={},b={};S.prcpStr="";var C=_Data.dailyForecast;p=C.day,f=C.night,g=p.precipPct.slice(0,3),w=f.precipPct.slice(0,3),S=g.reduce(function(e,t,a){return P=2*a+1,_=P+1,y=w[a],e[P+""]=t?t:"nl",e[_+""]=y?y:"nl",e.prcpStr+=(t<50?P+"_0,":P+"_50,")+(y<50?_+"_0,":_+"_50,"),e},S),h=p.icon.slice(0,3),v=f.icon.slice(0,3),b=h.reduce(function(e,t,a){return T=getCond(t),x=getCond(v[a]),e["fc"+(2*a+1)]=T?T:"nl",e["fc"+(2*a+2)]=x?x:"nl",e},b),p.temperature&&p.temperature.length&&(c=Math.max.apply(null,"e"===a?p.temperature.slice(0,3):p.temperature.slice(0,3).map(function(e){return convertTemp(e,a)}))||void 0),f.temperature&&f.temperature.length&&(l=Math.min.apply(null,"e"===a?f.temperature.slice(0,3):f.temperature.slice(0,3).map(function(e){return convertTemp(e,a)}))||void 0),p.temperature&&p.temperature.length&&(d=Math.max.apply(null,"m"===a?p.temperature.slice(0,3):p.temperature.slice(0,3).map(function(e){return convertTemp(e,a)}))||void 0),f.temperature&&f.temperature.length&&(u=Math.max.apply(null,"m"===a?f.temperature.slice(0,3):f.temperature.slice(0,3).map(function(e){return convertTemp(e,a)}))||void 0),p.snwQfp&&p.snwQfp.length&&f.snwQfp&&f.snwQfp.length&&(m=Math.min.apply(null,[].concat(p.snwQfp,f.snwQfp))||void 0),S.prcpStr=S.prcpStr.substr(0,S.prcpStr.length-1),D.prcp=S,D.cond=b,D.tempH=getTempInc(c,"f"),D.tempL=getTempInc(l,"f"),D.tempHR=tempR({val:c}),D.tempLR=tempR({val:l}),D.tempCH=d,D.tempCL=u,D.tempCHR=tempR({val:d,scale:"c"}),D.tempCLR=tempR({val:u,scale:"c"}),D.fsnw=snowR(m),D.fiveDay=p.phrase.slice(0,5).reduce(function(e,t,a){return e["d"+(a+1)]=t?t:"nl",e},{}),e.custParams.fhi=D.tempH+""||"",e.custParams.fhr=D.tempHR+""||"",e.custParams.fli=D.tempL+""||"",e.custParams.flr=D.tempLR+""||"",e.custParams.fhic=D.tempCH+""||"",e.custParams.floc=D.tempCL+""||"",e.custParams.fsnw=D.fsnw+""||"",e.custParams.prcp=D.prcp&&D.prcp.prcpStr+""||"",e.custParams.fc1=D.cond&&D.cond.fc1+""||"",e.custParams.fc2=D.cond&&D.cond.fc2+""||"",e.custParams.fc3=D.cond&&D.cond.fc3+""||"",e.custParams.d1=D.fiveDay&&D.fiveDay.d1+""||"",e.custParams.d2=D.fiveDay&&D.fiveDay.d2+""||"",e.custParams.d3=D.fiveDay&&D.fiveDay.d3+""||"",e.custParams.d4=D.fiveDay&&D.fiveDay.d4+""||"",e.custParams.d5=D.fiveDay&&D.fiveDay.d5+""||""}_Data&&_Data.vt1alerts&&(e.custParams.alerts=""),_Data&&_Data.pollenforecast&&(e.custParams.pollen=getPollen(_Data.pollenforecast)),e.weatherDataPromise.resolve()})}(TWC.adUtils||{}),!function(e){function loadJSON(e){var t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.open("GET","/localeToAdUnit.json",!0),t.onreadystatechange=function(){4==t.readyState&&"200"==t.status&&e(t.responseText)},t.send(null)}function extend(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]}function getCookie(e){var t="; "+document.cookie,a=t.split("; "+e+"=");if(2==a.length)return a.pop().split(";").shift()}function setAd(e){var t=e.getAttribute("id"),a=c&&"mobile"||"desktop";googletag.cmd.push(function(){var e=googletag.defineSlot(r,o[a][t].sizes,t).addService(googletag.pubads()).setTargeting("pos",o[a][t].pos);window.ls_dfp_slots.push(e),g.push(e)})}function displayAd(e){var t=e.getAttribute("id");googletag.display(t)}var t,a,n,r,s,o,i,c=window.innerWidth<768,l=(window.innerWidth>769&&window.innerWidth<1025,window.innerWidth>1024,getCookie("adstest")),d=c&&"7646-weatherMW"||"7646-weatherBW",u="//ox-d.weatherus.servedbyopenx.com/w/1.0/jstag?nc="+d,m=document.createElement("script"),p=document.getElementsByTagName("script")&&document.getElementsByTagName("script")[0];m.src=u,m.async=!0,p.parentNode.insertBefore(m,p),loadJSON(function(e){var o=JSON.parse(e);t="/7646/",a=c?o[language].m_mweb_wx:o[language].wx_online,a=l?"test_"+a:a,n="/home",r=t+a+n,s=t+a}),o={desktop:{WX_WindowShade:{pos:"wx_ws",sizes:[[300,276],[728,91],[970,90],[728,50]]},WX_Top300Variable:{pos:"wx_300var",sizes:[[300,251],[300,600],[300,1050],[300,276]]},WX_Mid300:{pos:"wx_mid300",sizes:[300,251]},WX_Hidden:{pos:"wx_hdn",sizes:[1,1]}},mobile:{MW_Position1:{pos:"mw_p1",sizes:[[320,51],[300,276],[300,45]]},MW_Position2:{pos:"mw_p2",sizes:[300,251]},MW_Position3:{pos:"mw_p3",sizes:[300,251]},MW_Position4:{pos:"mw_p4",sizes:[300,251]}}},i={cat:"fcst",ch:"fcst",fam:"fcst",ad_unit:encodeURIComponent(s)},l&&(i.adstest=l);var g=[];e.addLoadEvent(function(){var t=c?'[id^="MW_"]':'[id^="WX_"]',a=document.querySelectorAll(t);a.forEach(function(e){setAd(e)}),googletag.cmd.push(function(){Promise.all([e.wxftgPromise.promise,e.amznSlotsPromise.promise,e.criteoPromise.promise,e.weatherDataPromise]).then(function(){console.log("all promises done: ",(new Date).getTime()-window.renderStartTime),e.custParams=extend({},e.custParams,i);for(var t in e.custParams)e.custParams.hasOwnProperty(t)&&googletag.pubads().setTargeting(t,e.custParams[t]);if(googletag.pubads().enableSingleRequest(),googletag.enableServices(),"undefined"!=typeof index_headertag_lightspeed){var n=function(e,t){return function(){for(index_headertag_lightspeed.set_slot_targeting(t),f=0;f<e.length;f++)document.getElementById(e[f].getAttribute("id"))&&googletag.display(e[f].getAttribute("id"));document.getElementById("windowshade_info").innerHTML="Pubads Call Time : "+((new Date).getTime()-window.renderStartTime)/1e3+" secs",console.dir("Pubads Call Time : "+((new Date).getTime()-window.renderStartTime)/1e3+"secs")}}(a,window.ls_dfp_slots);index_headertag_lightspeed.add_session_end_hook(n,!0),index_headertag_lightspeed.refresh()}else a.forEach(function(e){displayAd(e)}),document.getElementById("windowshade_info").innerHTML="Pubads Call Time : "+((new Date).getTime()-window.renderStartTime)/1e3+" secs",console.dir("Pubads Call Time : "+((new Date).getTime()-window.renderStartTime)/1e3+"secs")})})})}(TWC.adUtils||{});